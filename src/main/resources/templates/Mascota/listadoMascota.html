<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Listado de Mascotas</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
</head>
<body class="bg-light d-flex flex-column min-vh-100">

    <header th:replace="~{layout/plantilla :: header}"></header>

    <main class="container my-5 flex-grow-1">
        <h2>Listado de Mascotas</h2>

        <div th:if="${#fields.hasErrors('*')}">
            <div class="alert alert-danger" th:each="err : ${#fields.errors('*')}" th:text="${err}"></div>
        </div>

        <div th:if="${error != null}">
            <div class="alert alert-danger" th:text="${error}"></div>
        </div>

        <div th:if="${mensaje != null}">
            <div class="alert alert-success" th:text="${mensaje}"></div>
        </div>

        <a th:href="@{/mascota/editar/0}" class="btn btn-success mb-3">Agregar Mascota Nueva</a>

        <table class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Nombre</th>
                    <th>Especie</th>
                    <th>Raza</th>
                    <th>Edad</th>
                    <th>Dueño</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="mascota : ${mascotas}">
                    <td th:text="${mascota.nombre}">Nombre</td>
                    <td th:text="${mascota.especie}">Especie</td>
                    <td th:text="${mascota.raza}">Raza</td>
                    <td th:text="${mascota.edad}">Edad</td>
                    <td th:text="${mascota.cliente.nombre}">Dueño</td>
                    <td>
                        <a th:href="@{'/mascota/perfil/' + ${mascota.id}}" class="btn btn-info btn-sm me-1">Ver</a>
                        <a th:href="@{'/mascota/editar/' + ${mascota.id}}" class="btn btn-primary btn-sm me-1">Editar</a>
                        <a th:href="@{'/mascota/eliminar/' + ${mascota.id}}"
                           class="btn btn-danger btn-sm"
                           onclick="return confirm('¿Seguro quieres eliminar esta mascota?')">Eliminar</a>
                    </td>
                </tr>
            </tbody>
        </table>

    </main>

    <footer th:replace="~{layout/plantilla :: footer}"></footer>

    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>